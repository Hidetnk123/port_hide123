<%= render "shared/header" %>

<%# 商品の概要 %>
<div class="item-show">
  <div class="item-box">
    <div class='item-img-contents'>
      <% @product.images.each do |image|%>
        <%= image_tag image, class:"item-box-img" %>
      <% end %>
    </div>
    <div class="item-explain-box">
      <span><%= @product.text %></span>
    </div>

    <%# ログインしているユーザと出品しているユーザが同一人物である時、商品の編集と削除を表示にしましょう%>
    <% if user_signed_in? && @product.user.id == current_user.id %>
    <%= link_to '商品の編集', edit_product_path(@product.id), method: :get, class: "item-red-btn" %>
    <p class='or-text'>or</p>
    <%= link_to '削除', product_path(@product.id), method: :delete, class:'item-destroy' %>
    <% end %>
    
    <%# // ログインしているユーザと出品しているユーザが同一人物である時、商品の編集と削除を表示にしましょう %>

  </div>
  <%# /商品の概要 %>

  <div class="comment-box">
    <form>
      <textarea class="comment-text"></textarea>
      <p class="comment-warn">
        相手のことを考え丁寧なコメントを心がけましょう。
        <br>
        不快な言葉遣いなどは利用制限や退会処分となることがあります。
      </p>
      <button type="submit" class="comment-btn">
        <%= image_tag "comment.png" ,class:"comment-flag-icon" ,width:"20",height:"25"%>
        <span>コメントする<span>
      </button>
    </form>
               
  </div>
 
</div>
<h3>mini_talk_app</h3>
<%= form_with(model: [@product, @comment], local: true) do |f| %>
  <%= f.text_field :text %>
  <%= f.submit '送信' %>
<% end %>
<div id='messages'>
  <% @comments.reverse_each do |message| %>
    <p><%= message.text %></p>
  <% end %>
</div>